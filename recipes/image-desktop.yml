name: sukarn-ublue-desktop
description: Customized for desktops with nvidia graphics card.
base-image: ghcr.io/sukarn-m/sukarn-os-gnome
image-version: latest

modules:
  - type: akmods
    base: coreos-stable
    nvidia: true
    install:
      - nvidia

  - type: files
    files:
      - source: desktop/usr
        destination: /usr
      - source: desktop/etc
        destination: /etc

  - type: gschema-overrides
    include:
      - zz2-sukarn-desktop.gschema.override

  - type: systemd
    system:
      enabled:
        - nvidia-kargs.service

  - type: script
    scripts:
      - nvidia.sh

  - from-file: base-last-steps.yml
