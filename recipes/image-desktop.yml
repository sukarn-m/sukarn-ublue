name: sukarn-ublue-desktop
description: Customized for desktops with nvidia graphics card.
# base-image: ghci.io/sukarn-m/sukarn-os-base
# image-version: latest
base-image: ghcr.io/ublue-os/silverblue-nvidia
image-version: gts

# module configuration, executed in order
# you can include multiple instances of the same module
modules:
## sukarn-os-base: disable this
  - from-file: variant-gnome.yml

## Device specific configuration starts after this line.
## -----------------------------------------------------

## sukarn-os-base: enable this
#  - type: akmods
#    nvidia: true
#    install:
#      - nvidia

  - type: files
    files:
#      - desktop/usr: /usr
      - source: desktop/usr
        destination: /usr

  - type: gschema-overrides
    include:
      - zz2-sukarn-desktop.gschema.override

  - type: systemd
    system:
      enabled:
        - nvidia-kargs.service

  - type: script
    scripts:
      - nvidia.sh
## sukarn-os-base: enable this
#      - remove-base-os-reference.sh
#      - coreos_kernel.sh
      - initramfs.sh

  - type: signing # this sests up the proper policy & signing files for signed images to work fully
